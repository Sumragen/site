<div s-loading-indicator=""></div>

<div class="profile-module-wrapper" ng-show="!busy">
    <div class="list-group user-list-item" ng-repeat="user in users track by user.id"  ng-show="!showEditForm">
        <div class="list-group-item" ng-click="toggleShowEditForm(user)">
            <div class="row-action-primary">
                <div class="row-picture">
                    <img class="circle user-list-avatar" src="{{user.avatar}}" ng-if="user.avatar" alt="icon">
                    <i class="material-icons user-list-icon" ng-if="!user.avatar">person</i>
                </div>
            </div>
            <div class="row-content">
                <h4 class="list-group-item-heading">{{user.username}}</h4>

                <p class="list-group-item-text">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <td><h4>{{user.first_name}}</h4></td>
                        <td><h4>{{user.last_name}}</h4></td>
                        <td><h4>{{user.email}}</h4></td>
                    </tr>
                    </thead>
                </table>
                </p>
            </div>
        </div>
        <div class="list-group-separator"></div>
    </div>

    <div ng-show="showEditForm">
        <form name="editForm"
              sf-schema="schema"
              sf-form="form"
              sf-model="selectedUser">
        </form>
        <a class="btn btn-default" ng-click="toggleShowEditForm()">Cancel</a>
        <a class="btn btn-info" ng-click="editProfile(editForm)">Submit</a>
    </div>
</div>