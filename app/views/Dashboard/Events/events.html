<div s-loading-indicator="" ng-show="busy"></div>

<div class="events-module-wrapper" ng-show="!busy">

    <!--toggle button-->
    <div class="form-group" ng-show="!showEditForm">
        <div class="col-right">
            <div class="togglebutton">
                Table
                <label>
                    <input type="checkbox" ng-model="toggleViews" ng-change="selectedPage(toggleViews)">
                </label>
                Map
            </div>
        </div>
    </div>
    <div ng-show="!showMap && !showEditForm">
        <a class="btn btn-raised btn-success" ng-if="isSettingPage" ng-click="toggleShowEditForm()">Create</a>
        <!--table with events-->
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <td>#</td>
                <td>Name</td>
                <td>Title</td>
                <td>Date</td>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="event in eventList track by $index" class="success events-item"
                ng-style="isSettingPage ? {'cursor': 'pointer'} : {'cursor': 'default'}"
                ng-click="toggleShowEditForm(event)">
                <td>{{$index+1}}</td>
                <td>{{event.name}}</td>
                <td>{{event.description}}</td>
                <td>{{event.date}}</td>
            </tr>
            </tbody>
        </table>
    </div>

    <!--edit form-->
    <div ng-if="showEditForm">
        <form name="editForm"
              sf-schema="event.schema"
              sf-form="event.form"
              sf-model="event.model">
        </form>
        <a class="btn btn-default" ng-click="toggleShowEditForm()">Cancel</a>
        <a class="btn btn-info" ng-click="(event.model.id)?editEvent(editForm): addEvent(editForm)">{{(event.model.id)?'Update':'Create'}}</a>
    </div>

    <!--map-->
    <div ng-show="showMap" class="map-container">
        <div class="map">
            <logicify-gmap center="gmOpts.center"
                           gm-options="gmOpts"
                           gm-ready="ready"
                           css-options="cssOpts">
            </logicify-gmap>
        </div>
    </div>

</div>



