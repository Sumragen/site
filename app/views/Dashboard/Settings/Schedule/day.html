<div class="schedule-settings-edit-module-wrapper">
    <div ng-if="!showEditForm">
        <a class="btn btn-raised btn-default" ui-sref="dashboard.settings.schedule.selector">Back</a>
        <div ng-if="!busy && !showDaysTable">
            <h1>{{selectedDay.title}}</h1>

            <input class="form-control" type="text" ng-model="searchText" placeholder="Filter by stage (full filter in developing)">

            <table class="table table-striped table-fixed-layout">
                <thead>
                <tr>
                    <th class="cell-align">Stage</th>
                    <th class="cell-align" ng-repeat="num in [0,1,2,3,4,5,6,7,8]">{{num}}</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="stage in stages | deepFilter: {stage: searchText, suffix: searchText} | orderBy:['stage', 'suffix'] track by $index"
                    class="active">
                    <td>{{stage.stage}}-{{stage.suffix}}</td>
                    <td class="edit-schedule-subject" ng-repeat="num in [0,1,2,3,4,5,6,7,8] track by $index"
                        ng-click="toggleShowEditForm(stage.stage,stage.suffix,num,stage.id)">
                        {{getLessonNameByOrder(stage.stage,stage.suffix,$index)}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div s-loading-indicator="" ng-show="busy"></div>
    </div>
    <!--edit form-->
    <div ng-if="showEditForm && !busy">
        <form name="editForm"
              sf-schema="lesson.schema"
              sf-form="lesson.form"
              sf-model="lesson.model">
        </form>
        <a class="btn btn-default" ng-click="cancel()">Cancel</a>
        <a class="btn btn-success" ng-click="(lesson.model.id)?updateLesson(editForm): createLesson(editForm)">{{(lesson.model.id)?'Update':'Create'}}</a>
    </div>
</div>
